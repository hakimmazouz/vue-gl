(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b(exports,require('three')):'function'==typeof define&&define.amd?define(['exports','three'],b):b(a.VueGL={},a.THREE)})(this,function(a,b){'use strict';/**
 * Returns a parsed vector3 object when the argument is a string.
 * Otherwise pass the argument through.
 */function c(a){return a.isVector3?a:new b.Vector3().fromArray(a.trim().split(/\s+/).map(function(a){return parseFloat(a)}))}/**
 * Returns a parsed euler object when the argument is a string.
 * Othewise pass the argument through.
 */function d(a){return a.isEuler?a:new b.Euler().fromArray(a.trim().split(/\s+/).map(function(a,b){return 3===b?a:parseFloat(a)}))}/**
 * Returns a parsed spherical object when the argument is a string.
 * Otherwise pass the argument through.
 */function e(a){var c;return a.isSpherical?a:(c=new b.Spherical).set.apply(c,u(a.trim().split(/\s+/).map(function(a){return parseFloat(a)}))).makeSafe()}var f=Math.PI,g=Boolean,h=[String],i=[String,Number],j=[String,b.Vector3],k=[String,b.Spherical],l=[String,b.Euler],m={render:function(a){var b=this.$slots.default;return b?a('div',b):void 0},inject:['vglNamespace'],props:{name:h},computed:{inst:function(){return new b.Geometry}},watch:{inst:{handler:function(a){this.$set(this.vglNamespace.geometries,this.name,a)},immediate:!0},name:function(a,b){this.vglNamespace.geometries[b]===this.inst&&this.$delete(this.vglNamespace.geometries,b),this.$set(this.vglNamespace.geometries,a,this.inst)}},beforeDestroy:function(){this.vglNamespace.geometries[this.name]===this.inst&&this.$delete(this.vglNamespace.geometries,this.name)}},n={render:function(a){var b=this.$slots.default;return b?a('div',b):void 0}},o={mixins:[m],props:{radius:{type:i,default:1},detail:{type:i,default:0}}},p={inject:['vglNamespace'],props:{material:h},computed:{materialObject:function(){return this.vglNamespace.materials[this.material]}},watch:{inst:{handler:function(a,b){this.materialObject&&(!b&&this.materialObject.addEventListener('update',this.vglObject3d.update),Object.assign(a,{material:this.materialObject}))},immediate:!0},materialObject:function(a,b){a!==b&&(b&&b.removeEventListener('update',this.vglObject3d.update),a&&(a.addEventListener('update',this.vglObject3d.update),Object.assign(this.inst,{material:a})),this.vglObject3d.update())}},beforeDestroy:function(){this.materialObject&&this.materialObject.removeEventListener('update',this.vglObject3d.update)}},q={inject:['vglNamespace'],props:{geometry:h},computed:{geometryObject:function(){return this.vglNamespace.geometries[this.geometry]}},watch:{inst:{handler:function(a,b){this.geometryObject&&(!b&&this.geometryObject.addEventListener('update',this.vglObject3d.update),Object.assign(a,{geometry:this.geometryObject}))},immediate:!0},geometryObject:function(a,b){a!==b&&(b&&b.removeEventListener('update',this.vglObject3d.update),a&&(a.addEventListener('update',this.vglObject3d.update),Object.assign(this.inst,{geometry:a})),this.vglObject3d.update())}},beforeDestroy:function(){this.geometryObject&&this.geometryObject.removeEventListener('update',this.vglObject3d.update)}},r={inject:['vglNamespace'],props:{map:h},computed:{texture:function(){return this.vglNamespace.textures[this.map]}},watch:{inst:{handler:function(a,b){this.texture&&(b&&this.texture.removeEventListener('update',b.update),this.texture.addEventListener('update',a.update)),Object.assign(a,{map:this.texture||null})},immediate:!0},texture:function(a,b){b&&b.removeEventListener('update',this.inst.update),a&&a.addEventListener('update',this.inst.update),Object.assign(this.inst,{map:a||null}),this.inst.update()}}},s={mixins:[n],inject:{vglNamespace:{default:function(){var a=this;return Object.defineProperties({},{cameras:{get:function(){return a.cameras}},scenes:{get:function(){return a.scenes}}})}}},data:function(){var a={}.hasOwnProperty.call(this.vglNamespace,'cameras')?{cameras:Object.create(null),scenes:Object.create(null)}:{};return Object.assign(a,{curves:Object.create(this.vglNamespace.curves||null),fonts:Object.create(this.vglNamespace.fonts||null),geometries:Object.create(this.vglNamespace.geometries||null),materials:Object.create(this.vglNamespace.materials||null),textures:Object.create(this.vglNamespace.textures||null)})},watch:{"vglNamespace.curves":function(a){this.curves=Object.assign(Object.create(a),this.curves)},"vglNamespace.fonts":function(a){this.fonts=Object.assign(Object.create(a),this.fonts)},"vglNamespace.geometries":function(a){this.geometries=Object.assign(Object.create(a),this.geometries)},"vglNamespace.materials":function(a){this.materials=Object.assign(Object.create(a),this.materials)},"vglNamespace.textures":function(a){this.textures=Object.assign(Object.create(a),this.textures)}},provide:function(){var a=this;return{vglNamespace:Object.create(this.vglNamespace,{curves:{get:function(){return a.curves}},fonts:{get:function(){return a.fonts}},geometries:{get:function(){return a.geometries}},materials:{get:function(){return a.materials}},textures:{get:function(){return a.textures}}})}}},t=function(){function a(a,b){var c,d=[],e=!0,f=!1;try{for(var g,h=a[Symbol.iterator]();!(e=(g=h.next()).done)&&(d.push(g.value),!(b&&d.length===b));e=!0);}catch(a){f=!0,c=a}finally{try{!e&&h['return']&&h['return']()}finally{if(f)throw c}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),u=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},v={mixins:[n],inject:{vglObject3d:{default:function(){var a,b=this,c=[];return{listeners:c,update:function(){a||(b.$nextTick(function(){c.forEach(function(a){a()}),a=!1}),a=!0)}}}}},provide:function(){var a=this;return{vglObject3d:Object.create(this.vglObject3d,{inst:{get:function(){return a.inst}}})}},beforeDestroy:function(){this.inst.parent&&this.inst.parent.remove(this.inst)},computed:{inst:function(){return new b.Object3D}},props:{position:j,rotation:l,scale:j,castShadow:g,receiveShadow:g,name:h},watch:{inst:{handler:function(a,b){if(b){b.removeEventListener('added',this.vglObject3d.update),b.removeEventListener('removed',this.vglObject3d.update);var e=b.children,f=b.parent;e.length&&a.add.apply(a,u(e)),f&&f.remove(b)}a.addEventListener('added',this.vglObject3d.update),a.addEventListener('removed',this.vglObject3d.update),this.vglObject3d.inst&&this.vglObject3d.inst.add(a),this.position&&this.inst.position.copy(c(this.position)),this.rotation&&this.inst.rotation.copy(d(this.rotation)),this.scale&&this.inst.scale.copy(c(this.scale)),Object.assign(a,{castShadow:this.castShadow,receiveShadow:this.receiveShadow}),this.vglObject3d.update()},immediate:!0},position:function(a){this.inst.position.copy(c(a)),this.vglObject3d.update()},rotation:function(a){this.inst.rotation.copy(d(a)),this.vglObject3d.update()},scale:function(a){this.inst.scale.copy(c(a)),this.vglObject3d.update()},castShadow:function(a){Object.assign(this.inst,{castShadow:a}),this.vglObject3d.update()},receiveShadow:function(a){Object.assign(this.inst,{receiveShadow:a}),this.vglObject3d.update()}}},w={mixins:[v],inject:['vglNamespace'],computed:{inst:function(){return new b.Camera}},props:{orbitTarget:j,orbitPosition:k},created:function(){this.vglObject3d.listeners.push(this.dispatchUpdate)},beforeDestroy:function(){this.vglObject3d.listeners.splice(this.vglObject3d.listeners.indexOf(this.dispatchUpdate),1),this.vglNamespace.cameras[this.name]===this.inst&&this.$delete(this.vglNamespace.cameras,this.name)},methods:{dispatchUpdate:function(){this.inst.dispatchEvent({type:'update'})},setOrbit:function(){if(this.orbitPosition||this.orbitTarget){var a=this.orbitTarget&&c(this.orbitTarget);if(this.orbitPosition){var d=this.inst.position.setFromSpherical(e(this.orbitPosition));a&&d.add(a)}this.inst.lookAt(a||new b.Vector3)}}},watch:{inst:{handler:function(a){this.$set(this.vglNamespace.cameras,this.name,a),this.setOrbit()},immediate:!0},name:function(a,b){this.vglNamespace.cameras[b]===this.inst&&this.$delete(this.vglNamespace.cameras,b),this.$set(this.vglNamespace.cameras,a,this.inst)},orbitTarget:function(){this.setOrbit(),this.vglObject3d.update()},orbitPosition:function(){this.setOrbit(),this.vglObject3d.update()}}},x={mixins:[v],props:{color:{type:h,default:'#fff'},intensity:{type:i,default:1}},computed:{inst:function(){return new b.Light}},watch:{inst:{handler:function(a){Object.assign(a,{intensity:parseFloat(this.intensity)}),a.color.setStyle(this.color)},immediate:!0},color:function(a){this.inst.color.setStyle(a),this.vglObject3d.update()},intensity:function(a){Object.assign(this.inst,{intensity:parseFloat(a)}),this.vglObject3d.update()}}},y={mixins:[n],inject:['vglNamespace'],props:{name:h},computed:{inst:function(){return new b.Material}},watch:{inst:{handler:function(a){this.$set(this.vglNamespace.materials,this.name,a)},immediate:!0},name:function(a,b){this.vglNamespace.materials[b]===this.inst&&this.$delete(this.vglNamespace.materials,b),this.$set(this.vglNamespace.materials,a,this.inst)}},beforeDestroy:function(){this.vglNamespace.materials[this.name]===this.inst&&this.$delete(this.vglNamespace.materials,this.name)}},z={mixins:[v,p,q],computed:{inst:function(){return new b.Line}}},A={mixins:[z],computed:{inst:function(){return new b.LineSegments}}},B={mixins:[m],props:{radiusTop:{type:i,default:1},radiusBottom:{type:i,default:1},height:{type:i,default:1},radialSegments:{type:i,default:8},heightSegments:{type:i,default:1},openEnded:g,thetaStart:{type:i,default:0},thetaLength:{type:i,default:2*f}},computed:{inst:function(){return new b.CylinderGeometry(parseFloat(this.radiusTop),parseFloat(this.radiusBottom),parseFloat(this.height),parseInt(this.radialSegments,10),parseInt(this.heightSegments,10),this.openEnded,parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},C={no:b.NoBlending,normal:b.NormalBlending,additive:b.AdditiveBlending,subtractive:b.SubtractiveBlending,multiply:b.MultiplyBlending,custom:b.CustomBlending},D={mixins:[m],computed:{inst:function(){return new b.ExtrudeGeometry([],{})}}};a.VglNamespace=s,a.VglObject3d=v,a.VglScene={mixins:[v],inject:['vglNamespace'],computed:{inst:function(){return new b.Scene}},created:function(){this.vglObject3d.listeners.push(this.dispatchUpdate)},beforeDestroy:function(){this.vglObject3d.listeners.splice(this.vglObject3d.listeners.indexOf(this.dispatchUpdate),1),this.vglNamespace.scenes[this.name]===this.inst&&this.$delete(this.vglNamespace.scenes,this.name)},methods:{dispatchUpdate:function(){this.inst.dispatchEvent({type:'update'})}},watch:{inst:{handler:function(a){this.$set(this.vglNamespace.scenes,this.name,a)},immediate:!0},name:function(a,b){this.vglNamespace.scenes[b]===this.inst&&this.$delete(this.vglNamespace.scenes,b),this.$set(this.vglNamespace.scenes,a,this.inst)}}},a.VglCamera=w,a.VglRenderer={mixins:[s],props:{precision:h,alpha:g,disablePremultipliedAlpha:g,antialias:g,disableStencil:g,preserveDrawingBuffer:g,disableDepth:g,logarithmicDepthBuffer:g,camera:h,scene:h,shadowMapEnabled:g},data:function(){return{el:!1}},computed:{renderer:function(){var a=new b.WebGLRenderer({precision:this.precision,alpha:this.alpha,premultipliedAlpha:!this.disablePremultipliedAlpha,antialias:this.antialias,stencil:!this.disableStencil,preserveDrawingBuffer:this.preserveDrawingBuffer,depth:!this.disableDepth,logarithmicDepthBuffer:this.logarithmicDepthBuffer});return a.shadowMap.enabled=this.shadowMapEnabled,a},cameraObject:function(){return this.vglNamespace.cameras[this.camera]},sceneObject:function(){return this.vglNamespace.scenes[this.scene]},state:function(){return[this.renderer,this.cameraObject,this.sceneObject,this.el]}},watch:{state:function(a,b){var c=t(b,4),d=c[0],e=c[1],f=c[2],g=c[3],h=t(a,4),i=h[0],j=h[1],k=h[2],l=h[3];!g&&l?(this.$el.insertBefore(this.renderer.domElement,this.$el.firstChild),this.resizeRenderer(),j&&k&&(this.resizeCamera(),j.addEventListener('update',this.render),k.addEventListener('update',this.render),this.render())):l&&(d!==i&&(this.resizeRenderer(),this.$el.replaceChild(i.domElement,d.domElement),d.dispose()),e&&f&&j&&k?(e!==j&&(this.resizeCamera(),e.removeEventListener('update',this.render),j.addEventListener('update',this.render)),f!==k&&(f.removeEventListener('update',this.render),k.addEventListener('update',this.render))):e&&f?(e.removeEventListener('update',this.render),f.removeEventListener('update',this.render)):j&&k&&(this.resizeCamera(),j.addEventListener('update',this.render),k.addEventListener('update',this.render)),j&&k&&this.render())}},beforeDestroy:function(){this.el&&this.cameraObject&&this.sceneObject&&(this.cameraObject.removeEventListener('update',this.render),this.sceneObject.removeEventListener('update',this.render)),this.renderer.dispose()},methods:{resizeRenderer:function(){this.renderer.setSize(this.$el.clientWidth,this.$el.clientHeight)},resizeCamera:function(){if(this.cameraObject.isPerspectiveCamera)Object.assign(this.cameraObject,{aspect:this.$el.clientWidth/this.$el.clientHeight});else if(this.cameraObject.isOrthographicCamera)Object.assign(this.cameraObject,{left:this.$el.clientWidth/-2,right:this.$el.clientWidth/2,top:this.$el.clientHeight/2,bottom:this.$el.clientHeight/-2});else throw new TypeError('Unexpected camera type.');this.cameraObject.updateProjectionMatrix()},render:function(){this.renderer.render(this.sceneObject,this.cameraObject)}},mounted:function(){this.el=!0},render:function(a){var b=this;return a('div',[a('iframe',{style:{visibility:'hidden',width:'100%',height:'100%'},on:{load:function(a){a.target.contentWindow.addEventListener('resize',function(){b.resizeRenderer(),b.cameraObject&&b.sceneObject&&(b.resizeCamera(),b.render())},!1)}}},this.$slots.default)])}},a.VglPerspectiveCamera={mixins:[w],props:{zoom:{type:i,default:1},near:{type:i,default:0.1},far:{type:i,default:2e3},fov:{type:i,default:50}},computed:{inst:function(){return new b.PerspectiveCamera}},watch:{inst:{handler:function(a){Object.assign(a,{zoom:parseFloat(this.zoom),near:parseFloat(this.near),far:parseFloat(this.far),fov:parseFloat(this.fov)})},immediate:!0},zoom:function(a){Object.assign(this.inst,{zoom:parseFloat(a)}),this.vglObject3d.update()},near:function(a){Object.assign(this.inst,{near:parseFloat(a)}),this.vglObject3d.update()},far:function(a){Object.assign(this.inst,{far:parseFloat(a)}),this.vglObject3d.update()},fov:function(a){Object.assign(this.inst,{fov:parseFloat(a)}),this.vglObject3d.update()}}},a.VglGroup={mixins:[v],computed:{inst:function(){return new b.Group}}},a.VglLight=x,a.VglDirectionalLight={mixins:[x],computed:{inst:function(){return new b.DirectionalLight}},props:{castShadow:g},watch:{inst:{handler:function(a){Object.assign(a,{castShadow:this.castShadow})},immediate:!0},castShadow:function(a){Object.assign(this.inst,{castShadow:a}),this.vglObject3d.update()}}},a.VglAmbientLight={mixins:[x],computed:{inst:function(){return new b.AmbientLight}}},a.VglMaterial=y,a.VglPointsMaterial={mixins:[y],props:{color:{type:h,default:'#fff'},size:{type:i,default:1},disableSizeAttenuation:g,lights:g},computed:{inst:function(){return new b.PointsMaterial}},watch:{inst:{handler:function(a){Object.assign(a,{size:parseFloat(this.size),sizeAttenuation:!this.disableSizeAttenuation,lights:this.lights}),a.color.setStyle(this.color)},immediate:!0},color:function(a){this.inst.color.setStyle(a),this.inst.dispatchEvent({type:'update'})},size:function(a){Object.assign(this.inst,{size:parseFloat(a)}),this.inst.dispatchEvent({type:'update'})},disableSizeAttenuation:function(a){Object.assign(this.inst,{sizeAttenuation:!a}),this.inst.dispatchEvent({type:'update'})},lights:function(a){Object.assign(this.inst,{lights:a}),this.inst.dispatchEvent({type:'update'})}}},a.VglGeometry=m,a.VglSphereGeometry={mixins:[m],props:{radius:{type:i,default:1},widthSegments:{type:i,default:8},heightSegments:{type:i,default:6},phiStart:{type:i,default:0},phiLength:{type:i,default:2*f},thetaStart:{type:i,default:0},thetaLength:{type:i,default:f}},computed:{inst:function(){return new b.SphereGeometry(parseFloat(this.radius),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10),parseFloat(this.phiStart),parseFloat(this.phiLength),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},a.VglMeshStandardMaterial={mixins:[y,r],props:{color:{type:h,default:'#fff'}},computed:{inst:function(){return new b.MeshStandardMaterial}},watch:{inst:{handler:function(a){a.color.setStyle(this.color)},immediate:!0},color:function(a){this.inst.color.setStyle(a),this.inst.dispatchEvent({type:'update'})}}},a.VglMesh={mixins:[v,p,q],computed:{inst:function(){return new b.Mesh}}},a.VglPoints={mixins:[v,p,q],computed:{inst:function(){return new b.Points}}},a.VglLineBasicMaterial={mixins:[y],props:{color:{type:h,default:'#fff'},lights:g,linewidth:{type:i,default:1},linecap:{type:h,default:'round'},linejoin:{type:h,default:'round'}},computed:{inst:function(){return new b.LineBasicMaterial}},watch:{inst:{handler:function(a){Object.assign(a,{lights:this.lights,linecap:this.linecap,linejoin:this.linejoin,linewidth:parseFloat(this.linewidth)}),a.color.setStyle(this.color)},immediate:!0},color:function(a){this.inst.color.setStyle(a),this.inst.dispatchEvent({type:'update'})},lights:function(a){Object.assign(this.inst,{lights:a}),this.inst.dispatchEvent({type:'update'})},linewidth:function(a){Object.assign(this.inst,{linewidth:parseFloat(a)}),this.inst.dispatchEvent({type:'update'})},linecap:function(a){Object.assign(this.inst,{linecap:a}),this.inst.dispatchEvent({type:'update'})},linejoin:function(a){Object.assign(this.inst,{linejoin:a}),this.inst.dispatchEvent({type:'update'})}}},a.VglLine=z,a.VglSprite={mixins:[v,p],computed:{inst:function(){return new b.Sprite}}},a.VglBoxGeometry={mixins:[m],props:{width:{type:i,default:1},height:{type:i,default:1},depth:{type:i,default:1},widthSegments:{type:i,default:1},heightSegments:{type:i,default:1},depthSegments:{type:i,default:1}},computed:{inst:function(){return new b.BoxGeometry(parseFloat(this.width),parseFloat(this.height),parseFloat(this.depth),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10),parseInt(this.depthSegments,10))}}},a.VglCircleGeometry={mixins:[m],props:{radius:{type:i,default:1},segments:{type:i,default:8},thetaStart:{type:i,default:0},thetaLength:{type:i,default:2*f}},computed:{inst:function(){return new b.CircleGeometry(parseFloat(this.radius),parseInt(this.segments,10),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},a.VglLineSegments=A,a.VglLineLoop={mixins:[z],computed:{inst:function(){return new b.LineLoop}}},a.VglConeGeometry={mixins:[B],props:{radius:{type:i,default:1}},computed:{inst:function(){return new b.ConeGeometry(parseFloat(this.radius),parseFloat(this.height),parseInt(this.radialSegments,10),parseInt(this.heightSegments,10),this.openEnded,parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},a.VglAxesHelper={mixins:[A],props:{size:{type:i,default:1}},computed:{inst:function(){return new b.AxesHelper(parseFloat(this.size))}}},a.VglOrthographicCamera={mixins:[w],props:{zoom:{type:i,default:1},near:{type:i,default:0.1},far:{type:i,default:2e3}},computed:{inst:function(){return new b.OrthographicCamera}},watch:{inst:{handler:function(a){Object.assign(a,{zoom:parseFloat(this.zoom),near:parseFloat(this.near),far:parseFloat(this.far)})},immediate:!0},zoom:function(a){Object.assign(this.inst,{zoom:parseFloat(a)}),this.vglObject3d.update()},near:function(a){Object.assign(this.inst,{near:parseFloat(a)}),this.vglObject3d.update()},far:function(a){Object.assign(this.inst,{far:parseFloat(a)}),this.vglObject3d.update()}}},a.VglCylinderGeometry=B,a.VglPlaneGeometry={mixins:[m],props:{width:{type:i,default:1},height:{type:i,default:1},widthSegments:{type:i,default:1},heightSegments:{type:i,default:1}},computed:{inst:function(){return new b.PlaneGeometry(parseFloat(this.width),parseFloat(this.height),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10))}}},a.VglDodecahedronGeometry={mixins:[o],computed:{inst:function(){return new b.DodecahedronGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},a.VglIcosahedronGeometry={mixins:[o],computed:{inst:function(){return new b.IcosahedronGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},a.VglOctahedronGeometry={mixins:[o],computed:{inst:function(){return new b.OctahedronGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},a.VglRingGeometry={mixins:[m],props:{innerRadius:{type:i,default:0.5},outerRadius:{type:i,default:1},thetaSegments:{type:i,default:8},phiSegments:{type:i,default:1},thetaStart:{type:i,default:0},thetaLength:{type:i,default:2*f}},computed:{inst:function(){return new b.RingGeometry(parseFloat(this.innerRadius),parseFloat(this.outerRadius),parseInt(this.thetaSegments,10),parseInt(this.phiSegments,10),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},a.VglTetrahedronGeometry={mixins:[o],computed:{inst:function(){return new b.TetrahedronGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},a.VglTorusGeometry={mixins:[m],props:{radius:{type:i,default:1},tube:{type:i,default:0.4},radialSegments:{type:i,default:8},tubularSegments:{type:i,default:6},arc:{type:i,default:2*f}},computed:{inst:function(){return new b.TorusGeometry(parseFloat(this.radius),parseFloat(this.tube),parseInt(this.radialSegments,10),parseInt(this.tubularSegments,10),parseFloat(this.arc))}}},a.VglTorusKnotGeometry={mixins:[m],props:{radius:{type:i,default:1},tube:{type:i,default:0.4},radialSegments:{type:i,default:8},tubularSegments:{type:i,default:64},p:{type:i,default:2},q:{type:i,default:3}},computed:{inst:function(){return new b.TorusKnotGeometry(parseFloat(this.radius),parseFloat(this.tube),parseInt(this.tubularSegments,10),parseInt(this.radialSegments,10),parseInt(this.p,10),parseInt(this.q,10))}}},a.VglArrowHelper={mixins:[v],props:{dir:j,length:{type:i,default:1},headLength:i,headWidth:i,color:{type:h,default:'#ff0'}},computed:{inst:function(){return new b.ArrowHelper(new b.Vector3(0,1),new b.Vector3())},lengths:function(){return[parseFloat(this.length),this.headLength?parseFloat(this.headLength):void 0,this.headWidth?parseFloat(this.headWidth):void 0]}},watch:{inst:{handler:function(a){a.setDirection(c(this.dir).normalize()),a.setLength.apply(a,u(this.lengths)),a.setColor(new b.Color(this.color))},immediate:!0},dir:function(a){this.inst.setDirection(c(a).normalize()),this.vglObject3d.update()},lengths:function(a){var b;(b=this.inst).setLength.apply(b,u(a)),this.vglObject3d.update()},color:function(a){this.inst.setColor(new b.Color(a)),this.vglObject3d.update()}}},a.VglBoxHelper={mixins:[A],props:{color:{type:h,default:'#ff0'}},computed:{inst:function(){return new b.BoxHelper}},watch:{inst:{handler:function(a){a.setFromObject(this.vglObject3d.inst),a.material.color.setStyle(this.color)},immediate:!0},"vglObject3d.inst":function(a){this.inst.setFromObject(a),this.vglObject3d.update()},color:function(a){this.inst.material.color.setStyle(a),this.vglObject3d.update()}}},a.VglPointLight={mixins:[x],props:{distance:{type:i,default:0},decay:{type:i,default:1}},computed:{inst:function(){return new b.PointLight}},watch:{inst:{handler:function(a){Object.assign(a,{distance:parseFloat(this.distance),decay:parseFloat(this.decay)})},immediate:!0},distance:function(a){Object.assign(this.inst,{distance:parseFloat(a)}),this.vglObject3d.update()},decay:function(a){Object.assign(this.inst,{decay:parseFloat(a)}),this.vglObject3d.update()}}},a.VglSpotLight={mixins:[x],props:{distance:{type:i,default:0},decay:{type:i,default:1},angle:{type:i,default:f/3},penumbra:{type:i,default:0},target:{type:j}},computed:{inst:function(){return new b.SpotLight}},beforeDestroy:function(){this.inst.target.parent&&this.inst.target.parent.remove(this.inst.target)},watch:{inst:{handler:function(a,b){b&&b.target.parent&&b.target.parent.remove(b.target),this.vglObject3d.inst&&this.vglObject3d.inst.add(a.target),c(this.target,a.target),Object.assign(a,{distance:parseFloat(this.distance),decay:parseFloat(this.decay),angle:parseFloat(this.angle),penumbra:parseFloat(this.penumbra)})},immediate:!0},distance:function(a){Object.assign(this.inst,{distance:parseFloat(a)}),this.vglObject3d.update()},decay:function(a){Object.assign(this.inst,{decay:parseFloat(a)}),this.vglObject3d.update()},angle:function(a){Object.assign(this.inst,{angle:parseFloat(a)}),this.vglObject3d.update()},penumbra:function(a){Object.assign(this.inst,{penumbra:parseFloat(a)}),this.vglObject3d.update()},target:function(a){c(a,this.inst.target.position),this.vglObject3d.update()}}},a.VglTexture={mixins:[n],inject:['vglNamespace'],props:{src:h,name:h},computed:{inst:function(){return new b.TextureLoader().load(this.src)}},watch:{inst:{handler:function(a){this.$set(this.vglNamespace.textures,this.name,a)},immediate:!0},name:function(a,b){this.vglNamespace.textures[b]===this.inst&&this.$delete(this.vglNamespace.textures,b),this.$set(this.vglNamespace.textures,a,this.inst)}},beforeDestroy:function(){this.vglNamespace.textures[this.name]===this.inst&&this.$delete(this.vglNamespace.textures,this.name)}},a.VglLensFlareProvider={mixins:[v],provide:function(){var a=this;return{vglLensFlare:Object.defineProperties({},{inst:{get:function(){return a.inst}},update:{value:this.vglObject3d.update}})}},computed:{inst:function(){return new b.LensFlare}}},a.VglLensFlare={mixins:[n],inject:['vglTextures','vglLensFlare'],props:{texture:h,size:{type:i,default:-1},distance:{type:i,default:0},blending:{type:i,default:'normal'},color:{type:h,default:'#fff'},opacity:{type:i,default:1}},data:function(){return{inst:{size:-1,distance:0,blending:b.NormalBlending,color:new b.Color('#fff'),opacity:1}}},computed:{textureObject:function(){return this.vglNamespace[this.texture]}},beforeDestroy:function(){if(this.inst.texture){var a=this.vglLensFlare.inst.lensFlares;a.splice(a.indexOf(this.inst),1),this.vglLensFlare.update()}},watch:{textureObject:{handler:function(a,b){if(a&&b)Object.assign(this.inst,{texture:a});else if(a){this.vglLensFlare.inst.add(a,this.inst.size,this.inst.distance,this.inst.blending,this.inst.color,this.inst.opacity);var c=this.vglLensFlare.lensFlares.slice(-1),d=t(c,1);this.inst=d[0]}else{var e=this.vglLensFlare.inst.lensFlares;e.splice(e.indexOf(this.inst),1),this.$delete(this.inst,'texture')}this.vglLensFlare.update()},immediate:!0},size:function(a){Object.assign(this.inst,{size:parseFloat(a)}),this.vglLensFlare.update()},distance:function(a){Object.assign(this.inst,{distance:parseFloat(a)}),this.vglLensFlare.update()},blending:function(a){Object.assign(this.inst,{blending:C[a]}),this.vglLensFlare.update()},color:function(a){this.inst.color.setStyle(a),this.vglLensFlare.update()},opacity:function(a){Object.assign(this.inst,{opacity:parseFloat(a)}),this.vglLensFlare.update()}}},a.VglFont={mixins:[n],inject:['vglNamespace'],props:{src:h,name:h},data:function(){return{inst:new b.Font({})}},watch:{inst:{handler:function(a){this.$set(this.vglNamespace.fonts,this.name,a)},immediate:!0},src:{handler:function(a){var c=this;new b.FontLoader().load(a,function(b){a===c.src&&(c.inst=b)})},immediate:!0},name:function(a,b){this.vglNamespace.fonts[b]===this.inst&&this.$delete(this.vglNamespace.fonts,b),this.$set(this.vglNamespace.fonts,a,this.inst)}},beforeDestroy:function(){this.vglNamespace.fonts[this.name]===this.inst&&this.$delete(this.vglNamespace.fonts,this.name)}},a.VglExtrudeGeometry=D,a.VglTextGeometry={mixins:[D],inject:['vglNamespace'],props:{text:h,font:h,size:{type:i,default:100},height:{type:i,default:50},curveSegments:{type:i,default:12},bevelEnabled:g,bevelThickness:{type:i,default:10},bevelSize:{type:i,default:8},bevelSegments:{type:i,default:3}},computed:{inst:function(){return new b.TextGeometry(this.text,{font:this.vglNamespace.fonts[this.font],size:parseFloat(this.size),height:parseFloat(this.height),curveSegments:parseInt(this.curveSegments,10),bevelEnabled:this.bevelEnabled,bevelThickness:parseFloat(this.bevelThickness),bevelSize:parseFloat(this.bevelSize),bevelSegments:parseInt(this.bevelSegments,10)})}}},a.VglSpriteMaterial={mixins:[y,r],props:{color:{type:h,default:'#fff'}},computed:{inst:function(){return new b.SpriteMaterial}},watch:{inst:{handler:function(a){a.color.setStyle(this.color)},immediate:!0},color:function(a){this.inst.color.setStyle(a),this.inst.dispatchEvent({type:'update'})}}},a.VglGridHelper={mixins:[A],props:{size:{type:i,default:10},divisions:{type:i,default:10},colorCenterLine:{type:h,default:'#444444'},colorGrid:{type:h,default:'#888888'}},computed:{inst:function(){return new b.GridHelper(parseFloat(this.size),parseInt(this.divisions,10),this.colorCenterLine,this.colorGrid)}}},a.VglShadowMaterial={mixins:[y],computed:{inst:function(){return new b.ShadowMaterial}}},a.VglCameraHelper={mixins:[A],props:{camera:h},inject:['vglNamespace'],computed:{inst:function(){return new b.CameraHelper(this.vglNamespace.cameras[this.camera])}}},a.VglDirectionalLightHelper={mixins:[v],props:{color:h,size:{type:i,default:1}},computed:{inst:function(){return new b.DirectionalLightHelper(this.vglObject3d.inst,parseFloat(this.size))}},watch:{inst:{handler:function(a){Object.assign(a,{color:this.color}),this.inst.update()},immediate:!0},color:function(a){Object.assign(this.inst,{color:a}),this.inst.update(),this.vglObject3d.update()}}},a.VglPolarGridHelper={mixins:[A],props:{radius:{type:i,default:10},radials:{type:i,default:16},circles:{type:i,default:8},divisions:{type:i,default:64},color1:{type:h,default:'#444444'},color2:{type:h,default:'#888888'}},computed:{inst:function(){return new b.PolarGridHelper(parseFloat(this.radius),parseInt(this.radials,10),parseInt(this.circles,10),parseInt(this.divisions,10),this.color1,this.color2)}}},Object.defineProperty(a,'__esModule',{value:!0})});
